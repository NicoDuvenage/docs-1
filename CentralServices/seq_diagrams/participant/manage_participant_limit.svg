<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2223px" preserveAspectRatio="none" style="width:1644px;height:2223px;" version="1.1" viewBox="0 0 1644 2223" width="1644px" zoomAndPan="magnify"><defs><filter height="300%" id="fc8rpvl9n8m3b" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="374" x="636" y="23.5352">2.06 Design an API to manage NET DEBIT CAP #330</text><rect fill="#FFFFE0" height="2177.9961" style="stroke: #A80036; stroke-width: 1.0;" width="718.5" x="855" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="1160.25" y="47.0566">Central Services</text><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="1982.0195" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="74.5" y="126.9766"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="1936.709" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="707.5" y="172.2871"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="1653.7402" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="919.5" y="455.2559"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="121.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1275.5" y="499.5664"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="121.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1275.5" y="732.0508"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="121.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1275.5" y="988.8457"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="156.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1275.5" y="1352.5039"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1516.5" y="529.1875"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1516.5" y="761.6719"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1516.5" y="1018.4668"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1516.5" y="1382.125"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="1975.0195" style="stroke: #000000; stroke-width: 2.0;" width="1620" x="13" y="133.9766"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="1423.2559" style="stroke: #000000; stroke-width: 2.0;" width="804" x="819" y="678.7402"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="998.332" style="stroke: #000000; stroke-width: 2.0;" width="784" x="829" y="911.2246"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="967.0215" style="stroke: #000000; stroke-width: 2.0;" width="764" x="839" y="935.5352"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="542.0977" style="stroke: #000000; stroke-width: 2.0;" width="744" x="849" y="1168.0195"/><rect fill="#FFFFFF" height="185.4395" style="stroke: none; stroke-width: 1.0;" width="744" x="849" y="1524.6777"/><rect fill="#FFFFFF" height="185.4395" style="stroke: none; stroke-width: 1.0;" width="764" x="839" y="1717.1172"/><rect fill="#FFFFFF" height="185.4395" style="stroke: none; stroke-width: 1.0;" width="804" x="819" y="1916.5566"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="79" x2="79" y1="116.9766" y2="2125.9961"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="712" x2="712" y1="116.9766" y2="2125.9961"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="924" x2="924" y1="116.9766" y2="2125.9961"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1280.5" x2="1280.5" y1="116.9766" y2="2125.9961"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1521.5" x2="1521.5" y1="116.9766" y2="2125.9961"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="23" y="114.0234">HUB OPERATOR</text><ellipse cx="79.5" cy="43.4883" fill="#FEFECE" filter="url(#fc8rpvl9n8m3b)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M79.5,51.4883 L79.5,78.4883 M66.5,59.4883 L92.5,59.4883 M79.5,78.4883 L66.5,93.4883 M79.5,78.4883 L92.5,93.4883 " fill="none" filter="url(#fc8rpvl9n8m3b)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="23" y="2138.5313">HUB OPERATOR</text><ellipse cx="79.5" cy="2151.4844" fill="#FEFECE" filter="url(#fc8rpvl9n8m3b)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M79.5,2159.4844 L79.5,2186.4844 M66.5,2167.4844 L92.5,2167.4844 M79.5,2186.4844 L66.5,2201.4844 M79.5,2186.4844 L92.5,2201.4844 " fill="none" filter="url(#fc8rpvl9n8m3b)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="631" y="114.0234">Participant Handler API</text><path d="M692,72.4883 L692,96.4883 M692,84.4883 L709,84.4883 " fill="none" filter="url(#fc8rpvl9n8m3b)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="721" cy="84.4883" fill="#FEFECE" filter="url(#fc8rpvl9n8m3b)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="631" y="2138.5313">Participant Handler API</text><path d="M692,2145.4844 L692,2169.4844 M692,2157.4844 L709,2157.4844 " fill="none" filter="url(#fc8rpvl9n8m3b)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="721" cy="2157.4844" fill="#FEFECE" filter="url(#fc8rpvl9n8m3b)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="859" y="114.0234">Participant Facade</text><ellipse cx="924.5" cy="84.4883" fill="#FEFECE" filter="url(#fc8rpvl9n8m3b)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="920.5,72.4883,926.5,67.4883,924.5,72.4883,926.5,77.4883,920.5,72.4883" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="859" y="2138.5313">Participant Facade</text><ellipse cx="924.5" cy="2157.4844" fill="#FEFECE" filter="url(#fc8rpvl9n8m3b)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="920.5,2145.4844,926.5,2140.4844,924.5,2145.4844,926.5,2150.4844,920.5,2145.4844" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1223.5" y="114.0234">Participant DAO</text><ellipse cx="1280.5" cy="84.4883" fill="#FEFECE" filter="url(#fc8rpvl9n8m3b)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1268.5" x2="1292.5" y1="98.4883" y2="98.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1223.5" y="2138.5313">Participant DAO</text><ellipse cx="1280.5" cy="2157.4844" fill="#FEFECE" filter="url(#fc8rpvl9n8m3b)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1268.5" x2="1292.5" y1="2171.4844" y2="2171.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1473.5" y="114.0234">Central Store</text><path d="M1503.5,64.4883 C1503.5,54.4883 1521.5,54.4883 1521.5,54.4883 C1521.5,54.4883 1539.5,54.4883 1539.5,64.4883 L1539.5,90.4883 C1539.5,100.4883 1521.5,100.4883 1521.5,100.4883 C1521.5,100.4883 1503.5,100.4883 1503.5,90.4883 L1503.5,64.4883 " fill="#FEFECE" filter="url(#fc8rpvl9n8m3b)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1503.5,64.4883 C1503.5,74.4883 1521.5,74.4883 1521.5,74.4883 C1521.5,74.4883 1539.5,74.4883 1539.5,64.4883 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1473.5" y="2138.5313">Central Store</text><path d="M1503.5,2151.4844 C1503.5,2141.4844 1521.5,2141.4844 1521.5,2141.4844 C1521.5,2141.4844 1539.5,2141.4844 1539.5,2151.4844 L1539.5,2177.4844 C1539.5,2187.4844 1521.5,2187.4844 1521.5,2187.4844 C1521.5,2187.4844 1503.5,2187.4844 1503.5,2177.4844 L1503.5,2151.4844 " fill="#FEFECE" filter="url(#fc8rpvl9n8m3b)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1503.5,2151.4844 C1503.5,2161.4844 1521.5,2161.4844 1521.5,2161.4844 C1521.5,2161.4844 1539.5,2161.4844 1539.5,2151.4844 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="1982.0195" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="74.5" y="126.9766"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="1936.709" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="707.5" y="172.2871"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="1653.7402" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="919.5" y="455.2559"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="121.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1275.5" y="499.5664"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="121.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1275.5" y="732.0508"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="121.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1275.5" y="988.8457"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="156.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1275.5" y="1352.5039"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1516.5" y="529.1875"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1516.5" y="761.6719"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1516.5" y="1018.4668"/><rect fill="#FFFFFF" filter="url(#fc8rpvl9n8m3b)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1516.5" y="1382.125"/><path d="M13,133.9766 L209,133.9766 L209,140.9766 L199,150.9766 L13,150.9766 L13,133.9766 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1975.0195" style="stroke: #000000; stroke-width: 2.0;" width="1620" x="13" y="133.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="151" x="28" y="147.5449">Manage Net Debit Cap</text><polygon fill="#A80036" points="695.5,168.2871,705.5,172.2871,695.5,176.2871,699.5,172.2871" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="84.5" x2="701.5" y1="172.2871" y2="172.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="91.5" y="167.8555">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="591" x="104.5" y="167.8555">Request to adjust ParticipantLimit for a certain Currency - POST - /participants/{name}/limits</text><path d="M89,185.5977 L89,424.5977 L297,424.5977 L297,195.5977 L287,185.5977 L89,185.5977 " fill="#FFFF00" filter="url(#fc8rpvl9n8m3b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M287,185.5977 L287,195.5977 L297,195.5977 L287,185.5977 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="95" y="203.166">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="95" y="218.4766">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="111" y="233.7871">payload: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="127" y="249.0977">LimitAdjustment: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="159" y="264.4082">currencyId: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="175" y="279.7188">type: &lt;string&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="175" y="295.0293">value: &lt;Id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="159" y="310.3398">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="159" y="325.6504">adjustmentValue: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="175" y="340.9609">type: &lt;number&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="175" y="356.2715">value: &lt;0&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="159" y="371.582">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="127" y="386.8926">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="111" y="402.2031">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="95" y="417.5137">}</text><polygon fill="#A80036" points="907.5,451.2559,917.5,455.2559,907.5,459.2559,911.5,455.2559" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="717.5" x2="913.5" y1="455.2559" y2="455.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="724.5" y="450.8242">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="737.5" y="450.8242">Adjust Limit for Participant</text><polygon fill="#A80036" points="1263.5,495.5664,1273.5,499.5664,1263.5,503.5664,1267.5,499.5664" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="929.5" x2="1269.5" y1="499.5664" y2="499.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="936.5" y="487.79">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="949.5" y="480.1348">Fetch Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="949.5" y="495.4453">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1026.5" y="495.4453">3200</text><polygon fill="#A80036" points="1504.5,525.1875,1514.5,529.1875,1504.5,533.1875,1508.5,529.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1285.5" x2="1510.5" y1="529.1875" y2="529.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1292.5" y="524.7559">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="1305.5" y="524.7559">Fetch Participant</text><polygon fill="#FFFFE0" filter="url(#fc8rpvl9n8m3b)" points="1485,542.498,1557,542.498,1567,553.498,1557,565.498,1485,565.498,1475,553.498,1485,542.498" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1487" y="559.0664">participant</text><polygon fill="#A80036" points="1296.5,587.8086,1286.5,591.8086,1296.5,595.8086,1292.5,591.8086" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1290.5" x2="1520.5" y1="591.8086" y2="591.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1302.5" y="587.377">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="1315.5" y="587.377">Retrieved Participant</text><polygon fill="#A80036" points="940.5,617.1191,930.5,621.1191,940.5,625.1191,936.5,621.1191" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="934.5" x2="1279.5" y1="621.1191" y2="621.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="946.5" y="616.6875">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="959.5" y="616.6875">Return Participant</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="929.5" x2="971.5" y1="650.7402" y2="650.7402"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="971.5" x2="971.5" y1="650.7402" y2="663.7402"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="930.5" x2="971.5" y1="663.7402" y2="663.7402"/><polygon fill="#A80036" points="940.5,659.7402,930.5,663.7402,940.5,667.7402,936.5,663.7402" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="936.5" y="645.998">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="949.5" y="645.998">Validate DFSP</text><path d="M819,678.7402 L881,678.7402 L881,685.7402 L871,695.7402 L819,695.7402 L819,678.7402 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1423.2559" style="stroke: #000000; stroke-width: 2.0;" width="804" x="819" y="678.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="834" y="692.3086">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="896" y="691.375">[Validate participant (success)]</text><polygon fill="#A80036" points="1263.5,728.0508,1273.5,732.0508,1263.5,736.0508,1267.5,732.0508" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="929.5" x2="1269.5" y1="732.0508" y2="732.0508"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="936.5" y="720.2744">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="949.5" y="712.6191">(for Participant) Fetch ParticipantCurrency</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="949.5" y="727.9297">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1026.5" y="727.9297">3200</text><polygon fill="#A80036" points="1504.5,757.6719,1514.5,761.6719,1504.5,765.6719,1508.5,761.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1285.5" x2="1510.5" y1="761.6719" y2="761.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1292.5" y="757.2402">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="1305.5" y="757.2402">Fetch ParticipantCurrency</text><polygon fill="#FFFFE0" filter="url(#fc8rpvl9n8m3b)" points="1457,774.9824,1585,774.9824,1595,785.9824,1585,797.9824,1457,797.9824,1447,785.9824,1457,774.9824" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="1459" y="791.5508">participantCurrency</text><polygon fill="#A80036" points="1296.5,820.293,1286.5,824.293,1296.5,828.293,1292.5,824.293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1290.5" x2="1520.5" y1="824.293" y2="824.293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1302.5" y="819.8613">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="1324.5" y="819.8613">Retrieved ParticipantCurrency</text><polygon fill="#A80036" points="940.5,849.6035,930.5,853.6035,940.5,857.6035,936.5,853.6035" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="934.5" x2="1279.5" y1="853.6035" y2="853.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="946.5" y="849.1719">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="968.5" y="849.1719">Return ParticipantCurrency</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="929.5" x2="971.5" y1="883.2246" y2="883.2246"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="971.5" x2="971.5" y1="883.2246" y2="896.2246"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="930.5" x2="971.5" y1="896.2246" y2="896.2246"/><polygon fill="#A80036" points="940.5,892.2246,930.5,896.2246,940.5,900.2246,936.5,896.2246" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="936.5" y="878.4824">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="958.5" y="878.4824">Validate ParticipantCurrency</text><path d="M829,911.2246 L1430,911.2246 L1430,918.2246 L1420,928.2246 L829,928.2246 L829,911.2246 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="998.332" style="stroke: #000000; stroke-width: 2.0;" width="784" x="829" y="911.2246"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="556" x="844" y="924.793">DB TRANSACTION IMPLEMENTATION - Lock on ParticipantLimit table with UPDATE</text><path d="M839,935.5352 L901,935.5352 L901,942.5352 L891,952.5352 L839,952.5352 L839,935.5352 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="967.0215" style="stroke: #000000; stroke-width: 2.0;" width="764" x="839" y="935.5352"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="854" y="949.1035">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="222" x="916" y="948.1699">[Validate participantCurrency (success)]</text><polygon fill="#A80036" points="1263.5,984.8457,1273.5,988.8457,1263.5,992.8457,1267.5,988.8457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="929.5" x2="1269.5" y1="988.8457" y2="988.8457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="936.5" y="977.0693">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="294" x="958.5" y="969.4141">(for ParticipantCurrency) Fetch ParticipantLimit</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="958.5" y="984.7246">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1035.5" y="984.7246">3200</text><polygon fill="#A80036" points="1504.5,1014.4668,1514.5,1018.4668,1504.5,1022.4668,1508.5,1018.4668" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1285.5" x2="1510.5" y1="1018.4668" y2="1018.4668"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1292.5" y="1014.0352">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="1314.5" y="1014.0352">Fetch ParticipantLimit</text><polygon fill="#FFFFE0" filter="url(#fc8rpvl9n8m3b)" points="1469,1031.7773,1573,1031.7773,1583,1042.7773,1573,1054.7773,1469,1054.7773,1459,1042.7773,1469,1031.7773" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="1471" y="1048.3457">participantLimit</text><polygon fill="#A80036" points="1296.5,1077.0879,1286.5,1081.0879,1296.5,1085.0879,1292.5,1081.0879" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1290.5" x2="1520.5" y1="1081.0879" y2="1081.0879"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1302.5" y="1076.6563">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="1324.5" y="1076.6563">Retrieved ParticipantLimit</text><polygon fill="#A80036" points="940.5,1106.3984,930.5,1110.3984,940.5,1114.3984,936.5,1110.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="934.5" x2="1279.5" y1="1110.3984" y2="1110.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="946.5" y="1105.9668">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="968.5" y="1105.9668">Return ParticipantLimit</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="929.5" x2="971.5" y1="1140.0195" y2="1140.0195"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="971.5" x2="971.5" y1="1140.0195" y2="1153.0195"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="930.5" x2="971.5" y1="1153.0195" y2="1153.0195"/><polygon fill="#A80036" points="940.5,1149.0195,930.5,1153.0195,940.5,1157.0195,936.5,1153.0195" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="936.5" y="1135.2773">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="958.5" y="1135.2773">Validate ParticipantLimit</text><path d="M849,1168.0195 L911,1168.0195 L911,1175.0195 L901,1185.0195 L849,1185.0195 L849,1168.0195 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="542.0977" style="stroke: #000000; stroke-width: 2.0;" width="744" x="849" y="1168.0195"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="864" y="1181.5879">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="201" x="926" y="1180.6543">[Validate participantLimit (success)]</text><path d="M1285,1190.3301 L1285,1307.3301 L1511,1307.3301 L1511,1200.3301 L1501,1190.3301 L1285,1190.3301 " fill="#D3D3D3" filter="url(#fc8rpvl9n8m3b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1501,1190.3301 L1501,1200.3301 L1511,1200.3301 L1501,1190.3301 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="1291" y="1207.8984">If (record exists &amp;&amp; isActive = 1)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="1307" y="1223.209">oldIsActive.isActive = 0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="1307" y="1238.5195">insert Record</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="1291" y="1253.8301">Else</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="1307" y="1269.1406">insert Record</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="1291" y="1284.4512">End</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1295" y="1299.7617"/><polygon fill="#A80036" points="1263.5,1348.5039,1273.5,1352.5039,1263.5,1356.5039,1267.5,1352.5039" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="929.5" x2="1269.5" y1="1352.5039" y2="1352.5039"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="936.5" y="1340.7275">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="301" x="958.5" y="1333.0723">(for ParticipantLimit) Insert new ParticipantLimit</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="958.5" y="1348.3828">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1035.5" y="1348.3828">3200</text><polygon fill="#A80036" points="1504.5,1378.125,1514.5,1382.125,1504.5,1386.125,1508.5,1382.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1285.5" x2="1510.5" y1="1382.125" y2="1382.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1292.5" y="1377.6934">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="1314.5" y="1377.6934">Insert ParticipantLimit</text><polygon fill="#FFFFE0" filter="url(#fc8rpvl9n8m3b)" points="1469,1395.4355,1573,1395.4355,1583,1406.4355,1573,1418.4355,1469,1418.4355,1459,1406.4355,1469,1395.4355" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="1471" y="1412.0039">participantLimit</text><polygon fill="#A80036" points="1296.5,1440.7461,1286.5,1444.7461,1296.5,1448.7461,1292.5,1444.7461" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1290.5" x2="1520.5" y1="1444.7461" y2="1444.7461"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1302.5" y="1440.3145">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="1324.5" y="1440.3145">Inserted ParticipantLimit</text><polygon fill="#A80036" points="940.5,1470.0566,930.5,1474.0566,940.5,1478.0566,936.5,1474.0566" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="934.5" x2="1274.5" y1="1474.0566" y2="1474.0566"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="946.5" y="1469.625">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="968.5" y="1469.625">Return ParticipantLimit</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="929.5" x2="971.5" y1="1508.6777" y2="1508.6777"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="971.5" x2="971.5" y1="1508.6777" y2="1521.6777"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="924.5" x2="971.5" y1="1521.6777" y2="1521.6777"/><polygon fill="#A80036" points="934.5,1517.6777,924.5,1521.6777,934.5,1525.6777,930.5,1521.6777" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="936.5" y="1503.9355">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="958.5" y="1503.9355">Validate status</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="849" x2="1593" y1="1525.6777" y2="1525.6777"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="854" y="1536.3125">[Validate participantLimit (failure)]</text><path d="M934,1544.6328 L934,1569.6328 L1066,1569.6328 L1066,1554.6328 L1056,1544.6328 L934,1544.6328 " fill="#FF0000" filter="url(#fc8rpvl9n8m3b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1056,1544.6328 L1056,1554.6328 L1066,1554.6328 L1056,1544.6328 " fill="#FF0000" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="940" y="1562.2012">Validation failure!</text><path d="M934,1583.9434 L934,1700.9434 L1307,1700.9434 L1307,1593.9434 L1297,1583.9434 L934,1583.9434 " fill="#FFFF00" filter="url(#fc8rpvl9n8m3b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1297,1583.9434 L1297,1593.9434 L1307,1593.9434 L1297,1583.9434 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="940" y="1601.5117">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="956" y="1616.8223">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="972" y="1632.1328">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="988" y="1647.4434">"errorCode": 3200,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="988" y="1662.7539">"errorDescription": "ParticipantLimit Not Found",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="972" y="1678.0645">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="956" y="1693.375">}</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="839" x2="1603" y1="1718.1172" y2="1718.1172"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="216" x="844" y="1728.752">[Validate participantCurrency (failure)]</text><path d="M934,1737.0723 L934,1762.0723 L1066,1762.0723 L1066,1747.0723 L1056,1737.0723 L934,1737.0723 " fill="#FF0000" filter="url(#fc8rpvl9n8m3b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1056,1737.0723 L1056,1747.0723 L1066,1747.0723 L1056,1737.0723 " fill="#FF0000" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="940" y="1754.6406">Validation failure!</text><path d="M934,1776.3828 L934,1893.3828 L1331,1893.3828 L1331,1786.3828 L1321,1776.3828 L934,1776.3828 " fill="#FFFF00" filter="url(#fc8rpvl9n8m3b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1321,1776.3828 L1321,1786.3828 L1331,1786.3828 L1321,1776.3828 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="940" y="1793.9512">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="956" y="1809.2617">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="972" y="1824.5723">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="988" y="1839.8828">"errorCode": 3200,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="328" x="988" y="1855.1934">"errorDescription": "ParticipantCurrency Not Found",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="972" y="1870.5039">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="956" y="1885.8145">}</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="819" x2="1623" y1="1917.5566" y2="1917.5566"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="824" y="1928.1914">[Validate participant (failure)]</text><path d="M934,1936.5117 L934,1961.5117 L1066,1961.5117 L1066,1946.5117 L1056,1936.5117 L934,1936.5117 " fill="#FF0000" filter="url(#fc8rpvl9n8m3b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1056,1936.5117 L1056,1946.5117 L1066,1946.5117 L1056,1936.5117 " fill="#FF0000" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="940" y="1954.0801">Validation failure!</text><path d="M934,1975.8223 L934,2092.8223 L1245,2092.8223 L1245,1985.8223 L1235,1975.8223 L934,1975.8223 " fill="#FFFF00" filter="url(#fc8rpvl9n8m3b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1235,1975.8223 L1235,1985.8223 L1245,1985.8223 L1235,1975.8223 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="940" y="1993.3906">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="956" y="2008.7012">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="972" y="2024.0117">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="988" y="2039.3223">"errorCode": 3200,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="988" y="2054.6328">"errorDescription": "FSP id Not Found",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="972" y="2069.9434">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="956" y="2085.2539">}</text><!--
@startuml
title 2.06 Design an API to manage NET DEBIT CAP #330

autonumber

actor "HUB OPERATOR" as OPERATOR
boundary "Participant Handler API" as PartHAPI
control "Participant Facade" as PARTICIPANT_FACADE
entity "Participant DAO" as PARTICIPANT_DAO
database "Central Store" as DB

box "Central Services" #LightYellow
participant PARTICIPANT_FACADE
participant PARTICIPANT_DAO
participant DB
end box


activate OPERATOR
group Manage Net Debit Cap
    OPERATOR -> PartHAPI: Request to adjust ParticipantLimit for a certain Currency - POST - /participants/{name}/limits
    note right of OPERATOR #yellow
        Message:
        {
            payload: {
                LimitAdjustment: {
                        currencyId: {
                            type: <string>,
                            value: <Id>
                        }
                        adjustmentValue: {
                            type: <number>,
                            value: <0>
                        }
                }
            }
        }
    end note

    activate PartHAPI
    PartHAPI -> PARTICIPANT_FACADE: Adjust Limit for Participant
    activate PARTICIPANT_FACADE
    PARTICIPANT_FACADE ->PARTICIPANT_DAO: Fetch Participant \n<color #FF0000><b>Error code:</b> 3200</color>
    activate PARTICIPANT_DAO
    PARTICIPANT_DAO -> DB: Fetch Participant
    activate DB
    hnote over DB #lightyellow
        participant
    end note
    DB - -> PARTICIPANT_DAO: Retrieved Participant
    deactivate DB
    PARTICIPANT_DAO - -> PARTICIPANT_FACADE: Return Participant
    deactivate PARTICIPANT_DAO
    PARTICIPANT_FACADE -> PARTICIPANT_FACADE: Validate DFSP
    alt Validate participant (success)
        PARTICIPANT_FACADE ->PARTICIPANT_DAO:  (for Participant) Fetch ParticipantCurrency \n<color #FF0000><b>Error code:</b> 3200</color>
        activate PARTICIPANT_DAO
        PARTICIPANT_DAO -> DB: Fetch ParticipantCurrency
        activate DB
        hnote over DB #lightyellow
            participantCurrency
        end note
        DB - -> PARTICIPANT_DAO: Retrieved ParticipantCurrency
        deactivate DB
        PARTICIPANT_DAO - -> PARTICIPANT_FACADE: Return ParticipantCurrency
        deactivate PARTICIPANT_DAO
        PARTICIPANT_FACADE->PARTICIPANT_FACADE: Validate ParticipantCurrency
        Group DB TRANSACTION IMPLEMENTATION - Lock on ParticipantLimit table with UPDATE
            alt Validate participantCurrency (success)
                PARTICIPANT_FACADE ->PARTICIPANT_DAO:  (for ParticipantCurrency) Fetch ParticipantLimit \n<color #FF0000><b>Error code:</b> 3200</color>
                activate PARTICIPANT_DAO
                PARTICIPANT_DAO -> DB: Fetch ParticipantLimit
                activate DB
                hnote over DB #lightyellow
                    participantLimit
                end note
                DB - -> PARTICIPANT_DAO: Retrieved ParticipantLimit
                deactivate DB
                PARTICIPANT_DAO - -> PARTICIPANT_FACADE: Return ParticipantLimit
                deactivate PARTICIPANT_DAO
                PARTICIPANT_FACADE -> PARTICIPANT_FACADE: Validate ParticipantLimit
                alt Validate participantLimit (success)
                    note right of PARTICIPANT_DAO #lightgrey
                        If (record exists && isActive = 1)
                            oldIsActive.isActive = 0
                            insert Record
                        Else
                            insert Record
                        End

                    end note

                    PARTICIPANT_FACADE ->PARTICIPANT_DAO:  (for ParticipantLimit) Insert new ParticipantLimit \n<color #FF0000><b>Error code:</b> 3200</color>

                    activate PARTICIPANT_DAO

                    PARTICIPANT_DAO -> DB: Insert ParticipantLimit
                    activate DB
                    hnote over DB #lightyellow
                        participantLimit
                    end note
                    DB - -> PARTICIPANT_DAO: Inserted ParticipantLimit
                    deactivate DB
                    PARTICIPANT_DAO - -> PARTICIPANT_FACADE: Return ParticipantLimit

                    PARTICIPANT_FACADE -> PARTICIPANT_FACADE: Validate status

                    deactivate PARTICIPANT_DAO
                else Validate participantLimit (failure)
                    note right of PARTICIPANT_FACADE #red: Validation failure!

                    note right of PARTICIPANT_FACADE #yellow
                        Message:
                            {
                                "errorInformation": {
                                    "errorCode": 3200,
                                    "errorDescription": "ParticipantLimit Not Found",
                                }
                            }
                    end note
                end
            else Validate participantCurrency (failure)
                note right of PARTICIPANT_FACADE #red: Validation failure!

                note right of PARTICIPANT_FACADE #yellow
                    Message:
                        {
                            "errorInformation": {
                                "errorCode": 3200,
                                "errorDescription": "ParticipantCurrency Not Found",
                            }
                        }
                end note
            end

        End

    else Validate participant (failure)
        note right of PARTICIPANT_FACADE #red: Validation failure!

        note right of PARTICIPANT_FACADE #yellow
            Message:
                {
                    "errorInformation": {
                        "errorCode": 3200,
                        "errorDescription": "FSP id Not Found",
                    }
                }
        end note

    end

    deactivate PARTICIPANT_FACADE
    deactivate PartHAPI
    deactivate OPERATOR
end
@enduml

PlantUML version 1.2018.01(Sun Jan 28 20:08:22 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-915-b12
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>