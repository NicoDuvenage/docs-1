<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1463px" preserveAspectRatio="none" style="width:1636px;height:1463px;" version="1.1" viewBox="0 0 1636 1463" width="1636px" zoomAndPan="magnify"><defs><filter height="300%" id="fzn94y1ds3ylm" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="266" x="686" y="23.5352">4.1.0 Get Participant Position Details</text><rect fill="#ADD8E6" height="1417.9434" style="stroke: #A80036; stroke-width: 1.0;" width="163" x="15" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="18" y="47.0566">ML API Adapter Service</text><rect fill="#FFFFE0" height="1417.9434" style="stroke: #A80036; stroke-width: 1.0;" width="1095" x="488.5" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="985.5" y="47.0566">Central Service</text><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="1250.6563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="91.5" y="126.2871"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="1205.0352" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="554.5" y="171.9082"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="880.3535" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="806.5" y="201.2188"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="214.75" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="806.5" y="1110.8828"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="121.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1058.5" y="245.8398"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="167.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1058.5" y="493.6348"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1526.5" y="275.1504"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="77.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1526.5" y="553.5664"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="1236.6563" style="stroke: #000000; stroke-width: 2.0;" width="1612" x="13" y="133.2871"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="923.2402" style="stroke: #000000; stroke-width: 2.0;" width="1592" x="23" y="439.7031"/><rect fill="#FFFFFF" height="244.0605" style="stroke: none; stroke-width: 1.0;" width="1592" x="23" y="1118.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="96" x2="96" y1="116.2871" y2="1386.9434"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="559.5" x2="559.5" y1="116.2871" y2="1386.9434"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="811" x2="811" y1="116.2871" y2="1386.9434"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1063.5" x2="1063.5" y1="116.2871" y2="1386.9434"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1531.5" x2="1531.5" y1="116.2871" y2="1386.9434"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="33" y="113.334">ML-API-ADAPTER</text><ellipse cx="96.5" cy="83.7988" fill="#FEFECE" filter="url(#fzn94y1ds3ylm)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="84.5" x2="108.5" y1="97.7988" y2="97.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="33" y="1399.4785">ML-API-ADAPTER</text><ellipse cx="96.5" cy="1418.4316" fill="#FEFECE" filter="url(#fzn94y1ds3ylm)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="84.5" x2="108.5" y1="1432.4316" y2="1432.4316"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="492.5" y="113.334">Central Service API</text><path d="M539,71.7988 L539,95.7988 M539,83.7988 L556,83.7988 " fill="none" filter="url(#fzn94y1ds3ylm)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="568" cy="83.7988" fill="#FEFECE" filter="url(#fzn94y1ds3ylm)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="492.5" y="1399.4785">Central Service API</text><path d="M539,1406.4316 L539,1430.4316 M539,1418.4316 L556,1418.4316 " fill="none" filter="url(#fzn94y1ds3ylm)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="568" cy="1418.4316" fill="#FEFECE" filter="url(#fzn94y1ds3ylm)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="131" x="743" y="113.334">Participant Handler</text><ellipse cx="811.5" cy="83.7988" fill="#FEFECE" filter="url(#fzn94y1ds3ylm)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="807.5,71.7988,813.5,66.7988,811.5,71.7988,813.5,76.7988,807.5,71.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="131" x="743" y="1399.4785">Participant Handler</text><ellipse cx="811.5" cy="1418.4316" fill="#FEFECE" filter="url(#fzn94y1ds3ylm)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="807.5,1406.4316,813.5,1401.4316,811.5,1406.4316,813.5,1411.4316,807.5,1406.4316" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1006.5" y="113.334">Participant DAO</text><ellipse cx="1063.5" cy="83.7988" fill="#FEFECE" filter="url(#fzn94y1ds3ylm)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1051.5" x2="1075.5" y1="97.7988" y2="97.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1006.5" y="1399.4785">Participant DAO</text><ellipse cx="1063.5" cy="1418.4316" fill="#FEFECE" filter="url(#fzn94y1ds3ylm)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1051.5" x2="1075.5" y1="1432.4316" y2="1432.4316"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1483.5" y="113.334">Central Store</text><path d="M1513.5,63.7988 C1513.5,53.7988 1531.5,53.7988 1531.5,53.7988 C1531.5,53.7988 1549.5,53.7988 1549.5,63.7988 L1549.5,89.7988 C1549.5,99.7988 1531.5,99.7988 1531.5,99.7988 C1531.5,99.7988 1513.5,99.7988 1513.5,89.7988 L1513.5,63.7988 " fill="#FEFECE" filter="url(#fzn94y1ds3ylm)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1513.5,63.7988 C1513.5,73.7988 1531.5,73.7988 1531.5,73.7988 C1531.5,73.7988 1549.5,73.7988 1549.5,63.7988 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1483.5" y="1399.4785">Central Store</text><path d="M1513.5,1412.4316 C1513.5,1402.4316 1531.5,1402.4316 1531.5,1402.4316 C1531.5,1402.4316 1549.5,1402.4316 1549.5,1412.4316 L1549.5,1438.4316 C1549.5,1448.4316 1531.5,1448.4316 1531.5,1448.4316 C1531.5,1448.4316 1513.5,1448.4316 1513.5,1438.4316 L1513.5,1412.4316 " fill="#FEFECE" filter="url(#fzn94y1ds3ylm)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1513.5,1412.4316 C1513.5,1422.4316 1531.5,1422.4316 1531.5,1422.4316 C1531.5,1422.4316 1549.5,1422.4316 1549.5,1412.4316 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="1250.6563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="91.5" y="126.2871"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="1205.0352" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="554.5" y="171.9082"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="880.3535" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="806.5" y="201.2188"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="214.75" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="806.5" y="1110.8828"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="121.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1058.5" y="245.8398"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="167.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1058.5" y="493.6348"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1526.5" y="275.1504"/><rect fill="#FFFFFF" filter="url(#fzn94y1ds3ylm)" height="77.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1526.5" y="553.5664"/><path d="M13,133.2871 L188,133.2871 L188,140.2871 L178,150.2871 L13,150.2871 L13,133.2871 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1236.6563" style="stroke: #000000; stroke-width: 2.0;" width="1612" x="13" y="133.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="130" x="28" y="146.8555">Get Position Details</text><polygon fill="#A80036" points="542.5,167.9082,552.5,171.9082,542.5,175.9082,546.5,171.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="101.5" x2="548.5" y1="171.9082" y2="171.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="108.5" y="167.166">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="407" x="121.5" y="167.166">Request to get positions - GET - /participants/{name}/positions</text><polygon fill="#A80036" points="794.5,197.2188,804.5,201.2188,794.5,205.2188,798.5,201.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="564.5" x2="800.5" y1="201.2188" y2="201.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="571.5" y="196.4766">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="584.5" y="196.4766">Fetch Positions for Participant</text><polygon fill="#A80036" points="1046.5,241.8398,1056.5,245.8398,1046.5,249.8398,1050.5,245.8398" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="816.5" x2="1052.5" y1="245.8398" y2="245.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="823.5" y="233.4424">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="836.5" y="225.7871">Fetch Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="836.5" y="241.0977">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="913.5" y="241.0977">2003,3201</text><polygon fill="#A80036" points="1514.5,271.1504,1524.5,275.1504,1514.5,279.1504,1518.5,275.1504" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1068.5" x2="1520.5" y1="275.1504" y2="275.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1075.5" y="270.4082">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="1088.5" y="270.4082">Fetch Participant</text><polygon fill="#FFFFE0" filter="url(#fzn94y1ds3ylm)" points="1495,288.1504,1567,288.1504,1577,299.1504,1567,311.1504,1495,311.1504,1485,299.1504,1495,288.1504" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1497" y="304.7188">participant</text><polygon fill="#A80036" points="1079.5,333.7715,1069.5,337.7715,1079.5,341.7715,1075.5,337.7715" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1073.5" x2="1530.5" y1="337.7715" y2="337.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1085.5" y="333.0293">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="1098.5" y="333.0293">Retrieved Participant</text><polygon fill="#A80036" points="827.5,363.082,817.5,367.082,827.5,371.082,823.5,367.082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="821.5" x2="1062.5" y1="367.082" y2="367.082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="833.5" y="362.3398">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="846.5" y="362.3398">Return Participant</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="816.5" x2="858.5" y1="411.7031" y2="411.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="858.5" x2="858.5" y1="411.7031" y2="424.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="817.5" x2="858.5" y1="424.7031" y2="424.7031"/><polygon fill="#A80036" points="827.5,420.7031,817.5,424.7031,827.5,428.7031,823.5,424.7031" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="823.5" y="399.3057">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="836.5" y="391.6504">Validate DFSP</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="836.5" y="406.9609">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="913.5" y="406.9609">3201</text><path d="M23,439.7031 L85,439.7031 L85,446.7031 L75,456.7031 L23,456.7031 L23,439.7031 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="923.2402" style="stroke: #000000; stroke-width: 2.0;" width="1592" x="23" y="439.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="38" y="453.2715">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="100" y="452.3379">[Validate participant (success)]</text><polygon fill="#A80036" points="1046.5,489.6348,1056.5,493.6348,1046.5,497.6348,1050.5,493.6348" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="816.5" x2="1052.5" y1="493.6348" y2="493.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="823.5" y="481.2373">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="836.5" y="473.582">Fetch Positions for Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="836.5" y="488.8926">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="913.5" y="488.8926">2003</text><polygon fill="#A80036" points="1514.5,549.5664,1524.5,553.5664,1514.5,557.5664,1518.5,553.5664" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1068.5" x2="1520.5" y1="553.5664" y2="553.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1075.5" y="533.5137">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="1088.5" y="518.2031">Fetch Positions for Participant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="1092.5" y="533.5137">For all active Currencies</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="422" x="1092.5" y="548.8242">Use participant-&lt;participantCurrency-&lt;participantPosition lookup</text><polygon fill="#FFFFE0" filter="url(#fzn94y1ds3ylm)" points="1467,566.5664,1595,566.5664,1605,585.5664,1595,604.5664,1467,604.5664,1457,585.5664,1467,566.5664" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="1469" y="583.1348">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="1469" y="598.4453">participantPosition</text><polygon fill="#A80036" points="1079.5,627.498,1069.5,631.498,1079.5,635.498,1075.5,631.498" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1073.5" x2="1530.5" y1="631.498" y2="631.498"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1085.5" y="626.7559">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="1107.5" y="626.7559">Retrieved Positions for Participant</text><polygon fill="#A80036" points="827.5,656.8086,817.5,660.8086,827.5,664.8086,823.5,660.8086" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="821.5" x2="1062.5" y1="660.8086" y2="660.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="833.5" y="656.0664">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="855.5" y="656.0664">Return Positions for Participant</text><path d="M821,673.8086 L821,1050.8086 L1100,1050.8086 L1100,683.8086 L1090,673.8086 L821,673.8086 " fill="#FFFF00" filter="url(#fzn94y1ds3ylm)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1090,673.8086 L1090,683.8086 L1100,683.8086 L1090,673.8086 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="827" y="691.377">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="827" y="706.6875">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="843" y="721.998">participantId: &lt;participantId&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="843" y="737.3086">respondedAt: &lt;timeStamp0&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="843" y="752.6191">participantPositions:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="859" y="767.9297">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="875" y="783.2402">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="891" y="798.5508">currentPosition: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="907" y="813.8613">currency: &lt;currency1&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="907" y="829.1719">value: &lt;amount1&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="907" y="844.4824">reservedValue: &lt;amount2&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="907" y="859.793">lastUpdated: &lt;timeStamp1&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="891" y="875.1035">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="875" y="890.4141">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="875" y="905.7246">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="891" y="921.0352">currentPosition: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="907" y="936.3457">currency: &lt;currency2&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="907" y="951.6563">value: &lt;amount3&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="907" y="966.9668">reservedValue: &lt;amount4&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="907" y="982.2773">lastUpdated: &lt;timeStamp2&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="891" y="997.5879">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="875" y="1012.8984">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="859" y="1028.209">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="827" y="1043.5195">}</text><polygon fill="#A80036" points="575.5,1077.5723,565.5,1081.5723,575.5,1085.5723,571.5,1081.5723" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="569.5" x2="810.5" y1="1081.5723" y2="1081.5723"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="581.5" y="1076.8301">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="603.5" y="1076.8301">Return Positions for Participant</text><polygon fill="#A80036" points="112.5,1106.8828,102.5,1110.8828,112.5,1114.8828,108.5,1110.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="106.5" x2="553.5" y1="1110.8828" y2="1110.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="118.5" y="1106.1406">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="140.5" y="1106.1406">Return Positions for Participant</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="1615" y1="1119.8828" y2="1119.8828"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="28" y="1130.5176">[Validate participant (failure)]</text><path d="M821,1138.8379 L821,1163.8379 L953,1163.8379 L953,1148.8379 L943,1138.8379 L821,1138.8379 " fill="#FF0000" filter="url(#fzn94y1ds3ylm)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M943,1138.8379 L943,1148.8379 L953,1148.8379 L943,1138.8379 " fill="#FF0000" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="827" y="1156.4063">Validation failure!</text><path d="M821,1178.1484 L821,1295.1484 L1223,1295.1484 L1223,1188.1484 L1213,1178.1484 L821,1178.1484 " fill="#FFFF00" filter="url(#fzn94y1ds3ylm)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1213,1178.1484 L1213,1188.1484 L1223,1188.1484 L1213,1178.1484 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="827" y="1195.7168">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="827" y="1211.0273">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="843" y="1226.3379">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="859" y="1241.6484">"errorCode": 3201,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="349" x="859" y="1256.959">"errorDescription": "FSP id does not exist or not found",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="843" y="1272.2695">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="827" y="1287.5801">}</text><polygon fill="#A80036" points="575.5,1321.6328,565.5,1325.6328,575.5,1329.6328,571.5,1325.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="569.5" x2="810.5" y1="1325.6328" y2="1325.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="581.5" y="1320.8906">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="603.5" y="1320.8906">Return</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="648.5" y="1320.8906">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="725.5" y="1320.8906">3201</text><polygon fill="#A80036" points="112.5,1350.9434,102.5,1354.9434,112.5,1358.9434,108.5,1354.9434" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="106.5" x2="553.5" y1="1354.9434" y2="1354.9434"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="118.5" y="1350.2012">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="140.5" y="1350.2012">Return</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="185.5" y="1350.2012">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="262.5" y="1350.2012">3201</text><!--
@startuml
title 4.1.0 Get Participant Position Details

autonumber


entity "ML-API-ADAPTER" as MLAPI
boundary "Central Service API" as CSAPI
control "Participant Handler" as PARTICIPANT_HANDLER
entity "Central Service API" as CSAPI
entity "Participant DAO" as PARTICIPANT_DAO
database "Central Store" as DB
box "ML API Adapter Service" #LightBlue
	participant MLAPI
end box

box "Central Service" #LightYellow
    participant CSAPI
    participant PARTICIPANT_HANDLER
    participant PARTICIPANT_DAO
    participant DB
end box


activate MLAPI
group Get Position Details
MLAPI -> CSAPI: Request to get positions - GET - /participants/{name}/positions
    activate CSAPI
    CSAPI -> PARTICIPANT_HANDLER: Fetch Positions for Participant
    activate PARTICIPANT_HANDLER
        PARTICIPANT_HANDLER ->PARTICIPANT_DAO: Fetch Participant \n<color #FF0000><b>Error code:</b> 2003,3201 </color>

    activate PARTICIPANT_DAO
    PARTICIPANT_DAO ->DB: Fetch Participant
    activate DB
    hnote over DB #lightyellow
            participant
    end note
    DB - -> PARTICIPANT_DAO: Retrieved Participant
    deactivate DB
    PARTICIPANT_DAO - ->PARTICIPANT_HANDLER: Return Participant
    deactivate PARTICIPANT_DAO
    PARTICIPANT_HANDLER ->PARTICIPANT_HANDLER: Validate DFSP \n<color #FF0000><b>Error code:</b> 3201</color>
    alt Validate participant (success)
    PARTICIPANT_HANDLER ->PARTICIPANT_DAO: Fetch Positions for Participant \n<color #FF0000><b>Error code:</b> 2003 </color>
    activate PARTICIPANT_DAO
    PARTICIPANT_DAO ->DB: Fetch Positions for Participant \n For all active Currencies \n Use participant-<participantCurrency-<participantPosition lookup
    activate DB
    hnote over DB #lightyellow
            participantCurrency
            participantPosition
    end note
    DB - -> PARTICIPANT_DAO: Retrieved Positions for Participant
    deactivate DB
    PARTICIPANT_DAO - ->PARTICIPANT_HANDLER: Return Positions for Participant
    deactivate PARTICIPANT_DAO
    note right of PARTICIPANT_HANDLER #yellow
            Message:
            {
                participantId: <participantId>,
                respondedAt: <timeStamp0>
                participantPositions:
                    [
                        {
                            currentPosition: {
                                currency: <currency1>,
                                value: <amount1>,
                                reservedValue: <amount2>,
                                lastUpdated: <timeStamp1>
                            }
                        },
                        {
                            currentPosition: {
                                currency: <currency2>,
                                value: <amount3>,
                                reservedValue: <amount4>,
                                lastUpdated: <timeStamp2>
                            }
                        }
                    ]
            }
        end note
    PARTICIPANT_HANDLER - ->CSAPI: Return Positions for Participant
	deactivate PARTICIPANT_HANDLER
CSAPI - ->MLAPI: Return Positions for Participant
else Validate participant (failure)
note right of PARTICIPANT_HANDLER #red: Validation failure!
    activate PARTICIPANT_HANDLER
    note right of PARTICIPANT_HANDLER #yellow
            Message:
            {
                "errorInformation": {
                    "errorCode": 3201,
                    "errorDescription": "FSP id does not exist or not found",
                }
            }
        end note
    PARTICIPANT_HANDLER - ->CSAPI: Return <color #FF0000><b>Error code:</b> 3201</color>
	deactivate PARTICIPANT_HANDLER
CSAPI - ->MLAPI: Return <color #FF0000><b>Error code:</b> 3201</color>
end

end

    deactivate CSAPI
deactivate MLAPI

@enduml

PlantUML version 1.2018.03(Thu Apr 05 22:29:15 IST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_151-b12
Operating System: Mac OS X
OS Version: 10.13.5
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>